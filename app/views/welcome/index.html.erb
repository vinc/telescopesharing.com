<div class="page-header">
  <h1>TelescopeSharing</h1>
  <p>Rent a remote telescope and explore the heaven from your home.</p>
</div>

<div id="map" style="width:100%;height:400px"></div>

<script>
  var map = L.map('map', { minZoom: 1, maxZoom: 7 }).setView([50, 0], 5);

  L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '<a href="http://osm.org/copyright">OpenStreetMap</a>'
  }).addTo(map);

  /*
  L.tileLayer('http://map1.vis.earthdata.nasa.gov/wmts-webmerc/VIIRS_CityLights_2012/default/{time}/{tilematrixset}{maxZoom}/{z}/{y}/{x}.{format}', {
    attribution: 'GIBS/NASA',
    bounds: [[-85.0511287776, -179.999999975], [85.0511287776, 179.999999975]],
    format: 'jpg',
    minZoom: 1,
    maxZoom: 8,
    time: '',
    tilematrixset: 'GoogleMapsCompatible_Level'
  }).addTo(map);
  */

  <% telescopes.each do |telescope| %>
    L.marker(<%= telescope.coordinates.reverse.to_json.html_safe %>)
  .bindPopup(<%= telescope.description.to_json.html_safe %> + '<br><br>' + '<%= link_to "View availability", telescope_path(telescope) %>')
      .addTo(map);
  <% end %>
</script>
